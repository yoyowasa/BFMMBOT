# configs/live.yml - live用の最小リスク設定
env: live

# 共通サイズ（戦略デフォルト）
size:
  default: 0.001

# 戦略ごとの上書き
strategy_cfg:
  stall_then_strike:
    size:
      default: 0.001
    take_profit_ticks: 1.0
    stop_ticks: 2.0
  cancel_add_gate:
    size:
      default: 0.001
    ca_ratio_win_ms: 600
    ca_threshold: 1.25
    taker_zscore_threshold: 3.0

# 銘柄
product_code: FX_BTC_JPY

# 送信デデュープ
tx:
  min_interval_ms: 1000
  place_dedup_ms: 1000

# 同時インフライト上限
orders:
  max_inflight: 1

gate:
  max_inflight_per_key: 1

# リスク上限
risk:
  margin_precheck_safety: 1.3
  margin_leverage: 1.0
  margin_buffer: 0.99
  max_active_orders: 1
  limit_qty: 0.001
  kill:
    daily_pnl_jpy: -30000
    max_dd_jpy: 20000
  auto_reduce:
    enabled: true
    profit_only: true
    force_on_risk: true
    tif: IOC
    min_step_qty: 0.001

logging:
  level: DEBUG
  heartbeat_status_sec: 2
features:
  # ST閾値を最小化して「とりあえず発注」できるよう緩める
  stall_min_mp_edge_bp: -0.5
  zero_min_mp_edge_bp: 0.0001
mode_switch:
  # Funding関連の一時停止を無効化（calc/transferで止まらないようにする）
  funding_calc_jst: []
  funding_transfer_lag_hours: 0
# dry-run を一定時間で終了させる秒数（ここでは30分）
dry_run_max_sec: 1800
env_overrides:
  live:
    logging:
      level: DEBUG
strategies:
  - stall_then_strike
